<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:pm="http://java.sun.com/jsf/composite/components"
    template="/templates/frame.xhtml">

    <ui:define name="content">

        <pm:pmList id="cartable" var="carItem"
            value="#{downloadView.cars}" rows="10"
            selection="#{downloadView.selectedCar}"
            onRowSelect="#{downloadView.onRowSelect}"
            rowKey="#{carItem.objectId}" fileNameExport="cars">
            
            <c:forEach items="#{['getObjectId','getName']}" var="label">
                <p:column headerText="#{label}">
                    <h:outputText
                        value="#{carItem.getClass().getMethod(label).invoke(carItem)}"></h:outputText>
                </p:column>
            </c:forEach>
            
        </pm:pmList>

        <p:commandButton value="Add"
            actionListener="#{downloadView.actionAdd}" update=":form:growl" />
        <p:commandButton value="Save"
            actionListener="#{downloadView.actionSave}" update="growl" ajax="false"/>
        <p:commandButton value="Test"
            actionListener="#{buttonBean.buttonAction}" update="growl" />

    </ui:define>
</ui:composition>